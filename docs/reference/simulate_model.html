<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>A Function to Simulate a Model from a Generic Simulation Function, with Pre and Post Processing — simulate_model • idmodelr</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">idmodelr</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="..//index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/seabbs/idmodelr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>A Function to Simulate a Model from a Generic Simulation Function, with Pre and Post Processing</h1>
    </div>

    
    <p>A Function to Simulate a Model from a Generic Simulation Function, with Pre and Post Processing</p>
    

    <pre class="usage"><span class='fu'>simulate_model</span>(<span class='no'>model</span>, <span class='no'>sim_fn</span>, <span class='kw'>inits</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>params</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>times</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>as_tibble</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>by_row</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>aggregate_to</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>compartments</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>strat</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>hold_out_var</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>new_var</span> <span class='kw'>=</span> <span class='st'>"incidence"</span>, <span class='kw'>total_pop</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>summary_var</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>model</th>
      <td><p>A model compatible with your <code>sim_fn</code>. A <code>pomp</code> model object is
recommended.</p></td>
    </tr>
    <tr>
      <th>sim_fn</th>
      <td><p>A generic simulation function, with the first arguement as the model object,
a <code>params</code> arguement, and a <code>as.data.frame</code> arguement. Tested to work with <code>trajectory</code>
and <code>simulate</code> from the <code>pomp</code> package.</p></td>
    </tr>
    <tr>
      <th>inits</th>
      <td><p>A dataframe of initial conditions, optionally a named vector can be used.</p></td>
    </tr>
    <tr>
      <th>params</th>
      <td><p>A dataframe of parameters, with each parameter as a variable. Optionally a named vector can be used.</p></td>
    </tr>
    <tr>
      <th>times</th>
      <td><p>A vector of the times to sample the model for, from a starting time to a final time.</p></td>
    </tr>
    <tr>
      <th>as_tibble</th>
      <td><p>Logical (defaults to <code>TRUE</code>) indicating if the output
should be returned as a tibble, otherwise returned as the default <code>sim_fn</code> output.</p></td>
    </tr>
    <tr>
      <th>by_row</th>
      <td><p>Logical (defaults to <code>FALSE</code>) indicating if inputed parameters should be inputed as a block to <code>sim_fn</code>
or individually. If <code>TRUE</code> then function will always return a tibble. Does not currently work with sim_fn that produces
multiple simulations for a single parameter set - for this scenario a block based approach or post processing is required.</p></td>
    </tr>
    <tr>
      <th>aggregate_to</th>
      <td><p>A character vector or list specifying the aggregation operations to perform on the
model output. Operations are carried out in the order specified. Implemented options are; disease, demographic,
and incidence.</p></td>
    </tr>
    <tr>
      <th>compartments</th>
      <td><p>A character vector or list specifying the unique compartments to aggregate. May either be
specified once for all aggregation functions or for each function seperately.</p></td>
    </tr>
    <tr>
      <th>strat</th>
      <td><p>The number of stratified groups in the model.</p></td>
    </tr>
    <tr>
      <th>hold_out_var</th>
      <td><p>A character vector or list specifying the unique compartments that will not be aggregated. May either be
specified once for all aggregation functions or for each function seperately. If compartments is set then this arguement does
not need to be used.</p></td>
    </tr>
    <tr>
      <th>new_var</th>
      <td><p>A character vector specifying the new variable to add when aggregating incidence.</p></td>
    </tr>
    <tr>
      <th>total_pop</th>
      <td><p>A logical (defaults to <code>TRUE</code>) indicating if the total population should be
calculated when summarsing the model demographics.</p></td>
    </tr>
    <tr>
      <th>summary_var</th>
      <td><p>A logical (defaults to <code>FALSE</code>), specifiying whether to add an additional summary variable across
all stratified levels.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>Logical (defaults to <code>FALSE</code>) indicating if progress information should be printed to the console.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Additional arguments to pass to <code>sim_fn</code></p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Trajectories as a tibble, optionally returns the default <code>sim_fn</code> output.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p>aggregate_model</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'>## Intialise</span>
<span class='no'>N</span> <span class='kw'>=</span> <span class='fl'>100000</span>
<span class='no'>I_0</span> <span class='kw'>=</span> <span class='fl'>1</span>
<span class='no'>S_0</span> <span class='kw'>=</span> <span class='no'>N</span> - <span class='no'>I_0</span>
<span class='no'>R_0</span> <span class='kw'>=</span> <span class='fl'>1.1</span>
<span class='no'>beta</span> <span class='kw'>=</span> <span class='no'>R_0</span>

<span class='co'>##Time for model to run over</span>
<span class='no'>tbegin</span> <span class='kw'>=</span> <span class='fl'>0</span>
<span class='no'>tend</span> <span class='kw'>=</span> <span class='fl'>50</span>
<span class='no'>times</span> <span class='kw'>&lt;-</span> <span class='fu'>seq</span>(<span class='no'>tbegin</span>, <span class='no'>tend</span>, <span class='fl'>1</span>)

<span class='co'>##Vectorise input</span>
<span class='no'>parameters</span> <span class='kw'>&lt;-</span> <span class='fu'>data.frame</span>(<span class='kw'>beta</span> <span class='kw'>=</span> <span class='no'>beta</span>)
<span class='no'>inits</span> <span class='kw'>&lt;-</span> <span class='fu'>data.frame</span>(<span class='kw'>S</span> <span class='kw'>=</span> <span class='no'>S_0</span>, <span class='kw'>I</span> <span class='kw'>=</span> <span class='no'>I_0</span>)

<span class='no'>SI_sim</span> <span class='kw'>&lt;-</span> <span class='fu'>simulate_model</span>(<span class='kw'>model</span> <span class='kw'>=</span> <span class='no'>SI_ode</span>, <span class='kw'>sim_fn</span> <span class='kw'>=</span> <span class='no'>solve_ode</span>, <span class='no'>inits</span>, <span class='no'>parameters</span>, <span class='no'>times</span>)</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Sam Abbott.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
